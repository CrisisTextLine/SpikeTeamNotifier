{% extends 'admin.admin.html.twig' %}

{% block body %}
    <div class="nameplate">
        <div class="nameplate-inner">
            &bull;&nbsp;&nbsp;ADMIN USERS&nbsp;&nbsp;&bull;
        </div>
    </div>

    <div class="page table-responsive">
        <table class="table">
            <tr>
                <th>Superadmin</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
                <th></th>
                <th></th>
            </tr>

            {% for admin in admins %}

                {% set super_admin_bool = false %}
                {% for role in admin.getRoles() %}
                    {% if role == 'ROLE_SUPER_ADMIN' %}{% set super_admin_bool = true %}{% endif %}
                {% endfor %}

                <tr>
                    <td class="center">
                        {% if super_admin_bool %}
                            <i class="fa fa-check-square"></i>
                        {% else %}
                            <i class="fa fa-square-o"></i>
                        {% endif %}
                    </td>
                    <td>
                        {{ admin.firstName }}
                    </td>
                    <td>
                        {{ admin.lastName }}
                    </td>
                    <td>
                        {{ admin.email }}
                    </td>
                    <td></td>
                    <td class="center">
                        {% if is_granted('ROLE_SUPER_ADMIN') or app.user.email == admin.email %}
                            <a href="/admin/{{ admin.email }}/edit">Edit</a>
                        {% else %}
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
            {% if is_granted('ROLE_SUPER_ADMIN') %}
                <tr>
                    {{ form_start(form, {'attr': {'class': 'form-inline'} }) }}
                        <td class="center"><i class="fa fa-check-square"></i></td>
                        <td>{{ form_widget(form.firstName, {'attr': {'class': 'form-control', 'placeholder': 'First Name'} }) }}</td>
                        <td>{{ form_widget(form.lastName, {'attr': {'class': 'form-control', 'placeholder': 'Last Name'} }) }}</td>
                        <td>{{ form_widget(form.email, {'attr': {'class': 'form-control', 'placeholder': 'Email'} }) }}</td>
                        <td>{{ form_widget(form.password, {'attr': {'class': 'form-control', 'placeholder': 'Password'} }) }}</td>
                        <td class="center">{{ form_widget(form.Add, {'attr': {'class': 'btn btn-default'} }) }}</td>
                    {{ form_end(form) }}
                </tr>
            {% endif %}
        </table>
    </div>

{% endblock %}


