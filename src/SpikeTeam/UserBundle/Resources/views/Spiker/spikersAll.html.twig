{% extends 'admin.spikers.html.twig' %}

{% block body %}
    <div class="nameplate">
        <div class="nameplate-inner">
            &bull;&nbsp;&nbsp;SPIKE TEAM MEMBERS&nbsp;&nbsp;&bull;
        </div>
    </div>

    <div class="page table-responsive">
        {% if existing %}
            <div class="alert">Sorry! A spiker by this phone number or email address already exists. Please fix the record and try again.</div>
        {% endif %}
        <div class="groups">
            <button class="all btn btn-primary">All Spikers</button>
            {% for group_id in group_ids %}
                <button id="group-{{ group_id }}" class="group btn btn-default">Group {{ group_id }}</button>
            {% endfor %}
            {% if is_granted("ROLE_SUPER_ADMIN") %}
                <button class="add btn btn-default">Add Group</button>
            {% endif %}

            <div class="onoffswitch">
                <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="myonoffswitch" checked>
                <label class="onoffswitch-label" for="myonoffswitch">
                    <span class="onoffswitch-inner"></span>
                    <span class="onoffswitch-switch"></span>
                </label>
            </div>

        </div>
        <table class="table spikers">
            <tr>
                <th>Enabled</th>
                <th>Super</th>
                <th>Group</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Phone Number</th>
                <th>Email</th>
                <th></th>
            </tr>
            <form class="form" action="/spikers/enabler" method="post" id="enabler">
                {% for spiker in spikers %}
                    <tr class="spiker group-{{ spiker.group.id }}">
                        <td class="center">
                            <input type="checkbox" value="1" id="{{ spiker.id }}-enabled" name="{{ spiker.id }}-enabled" class="inlineCheckbox" {% if spiker.isenabled %}checked="checked"{% endif %} />
                            <!-- {% if spiker.isEnabled %}
                                <i class="fa fa-check-square"></i>
                            {% else %}
                                <i class="fa fa-square-o"></i>
                            {% endif %} -->
                        </td>
                        <td class="center">
                            {% if spiker.isSupervisor %}
                                <i class="fa fa-check-square"></i>
                            {% else %}
                                &nbsp;
                            {% endif %}
                        </td>
                        <td>
                            <select name="{{ spiker.id }}-group" form="enabler">
                                {% for group_id in group_ids %}
                                    <option value="{{ group_id }}" {% if spiker.group is not null and group_id == spiker.group.id %}selected="selected"{% endif %}>{{ group_id }}</option>
                                {% endfor %}
                            </select>
                        </td>
                        <td>{{ spiker.firstName }}</td>
                        <td>{{ spiker.lastName }}</td>
                        <td>{{ spiker.phoneNumber }}</td>
                        <td>{{ spiker.email }}</td>
                        <td class="center">
                            <a href="/spikers/{{ spiker.phoneNumber }}/edit">Edit</a>
                        </td>
                    </tr>
                {% endfor %}

                <tr>
                    <td colspan="2" class="center">
                        <input type="submit" name="enabler" value="Save Status" class="btn btn-default" />
                    </td>
                    <td colspan="6">
                        <div class="spiker-numbers"><span class="group">{{ spikers|length }}</span> of <span class="total">{{ spikers|length }}</span> total Spikers</div>
                    </td>
                </tr>
            </form>

            <tr>
                {{ form_start(form, {'attr': {'class': 'form-inline'} }) }}
                    <!-- <td class="center"><i class="fa fa-check-square"></i></td> -->
                    <td></td>
                    <td class="center">{{ form_widget(form.isSupervisor) }}</td>
                    <td class="center">{{ form_widget(form.group) }}</td>
                    <td>{{ form_widget(form.firstName, {'attr': {'class': 'form-control', 'placeholder': 'First Name'} }) }}</td>
                    <td>{{ form_widget(form.lastName, {'attr': {'class': 'form-control', 'placeholder': 'Last Name'} }) }}</td>
                    <td>{{ form_widget(form.phoneNumber, {'attr': {'class': 'form-control', 'placeholder': 'Phone Number'} }) }}</td>
                    <td>{{ form_widget(form.email, {'attr': {'class': 'form-control', 'placeholder': 'Email'} }) }}</td>
                    <td class="center">{{ form_widget(form.Add, {'attr': {'class': 'btn btn-default'} }) }}</td>
                {{ form_end(form) }}
            </tr>

        </table>

    </div>

{% endblock %}


